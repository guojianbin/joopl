"use strict";var $namespace=null,$global=null,$manifest=null;(function(n){var e="2.4.0",r=null,i=null,u=function(n){Object.defineProperty(this,"name",{value:n.name,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"fullName",{value:n.fullName,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"parent",{value:n.parent,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"declareClass",{value:function(n,t){Object.defineProperty(this,n,{value:i(n,this,t),writable:!1,configurable:!1,enumerable:!0})},writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(this,"declareEnum",{value:function(n,t){Object.defineProperty(this,n,{value:r(t),writable:!1,configurable:!1,enumerable:!0})},writable:!1,enumerable:!0,configurable:!1})},t,f;Object.freeze(u);$global=new u({name:"$global",fullName:"$global",parent:null});t={createPropertyFromDescriptor:function(n,t,i,r){r&&(i.get&&(i.get=i.get.bind(r)),i.set&&(i.set=i.set.bind(r)));Object.defineProperty(r?r:n.prototype,t,i)},createProperty:function(t,i,r,u,f){f==n&&(f=!1);t.prototype.hasOwnProperty(i)||(r&&u?Object.defineProperty(t.prototype,i,{get:r,set:u,configurable:!f,enumerable:!0}):r?Object.defineProperty(t.prototype,i,{get:r,configurable:!f,enumerable:!0}):u&&Object.defineProperty(t.prototype,i,{set:u,configurable:!f,enumerable:!0}))},createEvent:function(n,t){if(n.hasOwnProperty(t))throw Error("The source object has already defined an event called '"+t+"'");var i=new $global.joopl.EventManager({source:n});Object.defineProperty(n,t,{get:function(){return i[t]},set:function(n){i[t]=n},configurable:!1,enumerable:!0});i.register(t)},buildObject:function(n,t,i){return typeof n.base=="function"?(Object.defineProperty(n,"base",{value:new n.base(t,!1),writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(n,"_",{value:n.base._,writable:!1,configurable:!1,enumerable:!1})):Object.defineProperty(n,"_",{value:{},writable:!1,configurable:!1,enumerable:!1}),i&&n.ctor.call(n,t),Object.defineProperty(n._,"derived",{value:n,writable:!1,configurable:!0,enumerable:!1}),n},buildInheritance:function(n,t){var u,r,i;if(t!=null){for(u in t.prototype._)n.prototype._[u]||Object.defineProperty(n.prototype._,u,{value:t.prototype._[u],writable:!0,configurable:!1,enumerable:!0});r=null;for(i in t.prototype)n.prototype.hasOwnProperty(i)||$global.joopl.Object.prototype.hasOwnProperty(i)||(r=Object.getOwnPropertyDescriptor(t.prototype,i),r?typeof r.value=="function"?Object.defineProperty(n.prototype,i,{value:t.prototype[i],writable:!1,enumerable:!0,configurable:!0}):this.createPropertyFromDescriptor(n,i,r):typeof t.prototype[i]=="function"&&Object.defineProperty(n.prototype,i,{value:t.prototype[i],writable:!1,enumerable:!0,configurable:!1}))}return t?t.prototype:null},hasValue:function(t){return t!==n&&t!=null}};Object.freeze(t);f={findFileInUsageMap:function(n){for(var i=$global.__DependencyUsageMap,r=!1,t=0;!r&&t<i.length;)i[t].fileName==n?r=!0:t++;return r?i[t]:null},buildDependencyList:function(n){for(var u=$global.__DependencyMap,f=$global.__DependencyUsageMap,i=this.findFileInUsageMap(n),r=[],t=0;t<i.dependsOn.length;t++)r.add(i.dependsOn[t])}};Object.freeze(f);$manifest={file:function(t,i){var e={executingFileName:t},o=$global.__DependencyUsageMap!==n&&window.head!=n&&window.head.js!=n,u,r,f;if(i=i.bind(e),o){for(u=!1,r=0;!u&&r<$global.__DependencyUsageMap.length;)$global.__DependencyUsageMap[r].fileName==t?u=!0:r++;u&&(f=$global.__DependencyUsageMap[r].dependsOn.splice(0),f.push(function(){i()}),head.js.apply(window,f))}else i()}};Object.freeze($manifest);$namespace={register:function(n,t){for(var e=typeof n=="string"?n.split("."):null,r=$global,i=null,o=[],f=0;f<e.length;f++)i=e[f],o.push(i),r[i]||Object.defineProperty(r,i,{value:new u({parent:r,name:i,fullName:o.join(".")}),writable:!1,configurable:!1,enumerable:!0}),r=r[i];typeof t=="function"&&$namespace.using(n,t,!0)},alias:function(n,t){$global[t]=n},using:function(t,i,r){var l,f,e,h;if(t===n)throw new $global.joopl.ArgumentException({argName:"namespace path",reason:"No namespace path has been provided"});if(typeof t=="string"){if(t.length==0)throw new $global.joopl.ArgumentException({argName:"namespace path",reason:"No namespace path has been provided"});t=[t]}if(t.length==0)throw new $global.joopl.ArgumentException({argName:"namespace path",reason:"No namespace path has been provided"});var c=null,o=$global,u=0,s=[];for(l in t){for(c=t[l].split("."),u=0;u<c.length;u++)if(o=o[c[u]],!o)throw new $global.joopl.ArgumentException({argName:"namespace path",reason:"The namespace path '"+t[l]+"' is not valid because the namespace '"+c[u]+"' is not declared"});s.push(o);o=$global}f={};e=null;for(u in s)for(h in s[u])if(f[h])throw Error("A type called '"+h+"' in current context from another namespace already exists. Create an alias or use a full namespace paths");else e=s[u][h],(e.prototype!==n&&!e.prototype.joopl!==n||e.joopl!==n)&&(f[h]=e);return Object.preventExtensions(f),i!==n&&typeof i=="function"?(r?i.bind(s[u])():i.length==0?i.bind(f)():i.bind($global)(f),null):f}};Object.freeze($namespace);i=function(i,r,u){var f=null,h,e,o,l,c,s;if(!u&&this?u=this:u||this||(u={}),f=u.$inmutable===!0&&Object.freeze?function(i,r){t.buildObject(this,i,r===n);Object.freeze(this)}:u.dynamic===!1&&Object.preventExtensions?function(i,r){t.buildObject(this,i,r===n);Object.preventExtensions(this)}:function(i,r){t.buildObject(this,i,r===n)},f.prototype=new $global.joopl.Object,h=null,h=u.ctor?u.ctor:function(){},Object.defineProperty(f.prototype,"ctor",{value:h,writable:!1,configurable:!1,enumerable:!1}),u.members){e=null;for(o in u.members)if(e=Object.getOwnPropertyDescriptor(u.members,o),typeof e.value=="function")f.prototype.hasOwnProperty(o)?Object.defineProperty(f.prototype,o,{value:u.members[o]}):Object.defineProperty(f.prototype,o,{value:u.members[o],writable:!1,configurable:!0,enumerable:!0});else if(o=="events"&&typeof e.value=="object")for(l in e.value)t.createEvent(f.prototype,e.value[l]);else(e.hasOwnProperty("value")||e.hasOwnProperty("get")||e.hasOwnProperty("set"))&&t.createPropertyFromDescriptor(f,o,e)}if(u.inherits&&(t.buildInheritance(f,u.inherits),Object.defineProperty(f.prototype,"base",{value:u.inherits,writable:!1,configurable:!1,enumerable:!1})),c=!1,Array.isArray(u.attributes)){for(s in u.attributes)if(!u.attributes[s]&&!(u.attributes[s].isTypeOf instanceof Function)&&!u.attributes[s].isTypeOf($global.joopl.Attribute))throw new $global.joopl.ArgumentException({argName:"attributes",reason:"A non-attribute type given as attribute"});c=!0}return typeof $global.joopl.Type=="function"&&Object.defineProperty(f,"type",{configurable:!1,enumerable:!0,writable:!1,value:new $global.joopl.Type({name:i,namespace:r,attributes:c?u.attributes:[]})}),f};Object.freeze(i);$namespace.register("joopl",function(){var n=this,u;this.Object=function(){};this.Object.prototype={get joopl(){return e},get typeKind(){return"class"},isTypeOf:function(n){var t=this,i=!1;if(this instanceof n)i=!0;else while(!i&&t.base)(i=t.base instanceof n)||(t=t.base);return i}};this.declareClass("Type",{ctor:function(n){this._.attributes=n.attributes;this._.name=n.name;this._.namespace=n.namespace},members:{get name(){return this._.name},get fullName(){return this.namespace.fullName+"."+this.name},get namespace(){return this._.namespace},get attributes(){return this._.attributes},getAttribute:function(n){for(var i=!1,t=0;!i&&t<this.attributes.length;)this.attributes[t]instanceof n?i=!0:t++;return i?this.attributes[t]:null},hasAttribute:function(n){return this.getAttribute(n)!=null}}});this.declareClass("Attribute",{members:{}});u=i("EnumValue",{name:"joopl"},{ctor:function(n){this._.value=n.value},members:{get value(){return this._.value},or:function(n){var i=this.value|n,t=new Number(i);return t.enum=new u({value:i}),Object.freeze(t),t},and:function(n){var i=this.value&n,t=new Number(i);return t.enum=new u({value:i}),Object.freeze(t),t},hasFlag:function(n){return(this.value&n)===Number(n)}}});this.Enum=new(i("Enum",this,{members:{parseName:function(t,i){if(t.valueNames.indexOf(i)>-1)return t[i];throw new n.ArgumentException({argName:"valueName",reason:"Given value name could not be found as value of the given enumeration type"});},parseNames:function(t,i){var f,e,r;if(!(i&&typeof i=="string"))throw new n.ArgumentException({argName:"valueName",reason:"Wrong value names"});for(f=i.replace(" ","").split(","),e=0,r=0;r<f.length;r++)e+=this.parseName(t,f[r]);return new u({value:e})}}}));r=function(t){var i,e,r,f;if(typeof t!="object")throw new n.ArgumentException({argName:"enumDef",reason:"No definition for the enumeration given"});i=function(){};i.prototype=new n.Object;e=[];for(r in t){if(typeof t[r]!="number")throw new n.ArgumentException({argName:"enumDef",reason:"An enumeration definition must contain numeric properties only"});f=new Number(t[r]);f.enum=new u({value:f});Object.defineProperty(i,r,{value:f,configurable:!1,enumerable:!0,writable:!1});e.push(r)}return Object.defineProperty(i,"valueNames",{value:e,configurable:!1,enumerable:!1,writable:!1}),Object.freeze(i),i};Object.freeze(r);this.declareClass("EventManager",{ctor:function(n){this._.source=n.source},members:{get source(){return this._.source},raiseHandlers:function(n,t,i,r){var u=null,f=null,e,o;for(e in t){u=t[e];f=typeof u;switch(f){case"function":u.bind(r?r:n)(i?i:null);break;case"object":o=u.handler;o.bind(u.context?u.context:r?r:n)(i?i.args:null)}}},register:function(n){var t=[],i=this,r=this.source;Object.defineProperty(this,n,{get:function(){return function(n,r){return i.raiseHandlers(this,t,n,r)}},set:function(n){var i=t.indexOf(n);i==-1?t.push(n):t.splice(i,1)},configurable:!1,enumerable:!1})}}});this.declareClass("Exception",{ctor:function(n){this._.message=n.message;this._.innerException=n.innerException},members:{get message(){return this._.message},get innerException(){return this._.innerException},toString:function(){return this.message}}});this.declareClass("ArgumentException",{inherits:this.Exception,ctor:function(n){this._.argName=n.argName;var t="The given argument '"+n.argName+"' is not valid";n.reason&&(t+=" (Reason: "+n.reason+")");this.base.ctor({message:t})},members:{get argName(){return this._.argName}}});this.declareClass("NotImplementedException",{inherits:this.Exception,ctor:function(n){this.base.ctor({message:!t.hasValue(n)||!t.hasValue(n.memberName)?"A method or property is not implemented":"Method or property '"+n.memberName+"' is not implemented"});this._.memberName=n.memberName},members:{get memberName(){return this._.memberName}}})})})(undefined)